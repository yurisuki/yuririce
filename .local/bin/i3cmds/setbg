#!/bin/sh
# This script will set a wallpaper
# on wal, betterlockscreen or both.
# It's used by vifm, but it can be
# also used in terminal.

badfile="This file type can't be used as a wallpaper."
waldir="${XDG_DATA_HOME:-$HOME/.local/share}/setbg"

echowrapper() {
printf "$1\n"
exit
}

help() { # This
	echowrapper "This script will set a wallpaper on wal, betterlockscreen or both.\\nARGUMENTS\\n---------\\n all: Change wallpaper for wal and betterlockscreen\\n lock: Change wallpaper only for betterlockscreen.\\n wal: Change wallpaper only for wal.\\n refresh: Refresh wallpaper (This is used by i3 to load the wallpaper.)"
}

[ -z "$1" ] && help

case "$1" in
	--help|-h) help ;;
	all) case "$2" in
		*.png | *.jpg) wal -i "$2" && cp "$2" "$waldir/wall.png" && betterlockscreen -u "$waldir/wall.png" && wal -c ;;
		*) echowrapper "$badfile" ;;
	esac ;;
	lock) case "$2" in
		*.png | *.jpg) cp "$2" "$waldir/lock.png" && betterlockscreen -u "$waldir/lock.png" ;;
		*) echowrapper "$badfile" ;;
	esac ;;
	wal) case "$2" in
		*.png | *.jpg) wal -i "$2" && cp "$2" "$waldir/wall.png" ;;
		*) echowrapper "$badfile" ;;
	esac ;;
	refresh) ! [ -f "$waldir/wall.png" ] && notify-send "$(printf "❌ wall.png doesn't exist.\\nWon't refresh a wallpaper.")" && echowrapper "$waldir/wall.png doesn't exist."
	wal -i "$waldir" >/dev/null & ;;
	*) echowrapper "This argument doesn't exist. See avalible arguments by using $0 <--help>." ;;
esac
